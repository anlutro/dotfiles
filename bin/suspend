#!/usr/bin/env sh

# Figure out how to suspend...
if command -v qdbus >/dev/null 2>&1; then
	exec ~/bin/lock
	qdbus --system org.freedesktop.login1 /org/freedesktop/login1 \
		org.freedesktop.login1.Manager.Suspend true
elif command -v dbus-send >/dev/null 2>&1; then
	exec ~/bin/lock
	dbus-send --system --print-reply --dest="org.freedesktop.UPower" \
		/org/freedesktop/UPower org.freedesktop.UPower.Suspend
else
	exit 1
fi
