# Set root window (desktop) colour - hsetroot works with compton
bg='"#2E3436"'
if command -v hsetroot >/dev/null 2>&1; then
	hsetroot -solid $bg &
elif command -v xsetroot >/dev/null 2>&1; then
	xsetroot -solid $bg &
fi


# Start nitrogen wallpaper manager
if command -v nitrogen >/dev/null 2>&1; then
	nitrogen --restore &
fi


# Start tint2 panel
if command -v tint2 >/dev/null 2>&1; then
	tint2 &
fi


# Volume control for systray
if command -v pnmixer >/dev/null 2>&1; then
	pnmixer &
fi


# Volume keys daemon
xfce4-volumed &


# Enable power management
xfce4-power-manager &


# Start Thunar Daemon
thunar --daemon &


# Detect and configure touchpad. See 'man synclient' for more info.
if egrep -iq 'touchpad' /proc/bus/input/devices; then
    synclient VertEdgeScroll=1 &
    synclient TapButton1=1 &
fi


# Keyboard repeat - delay (ms) and characters per second
xset r rate 175 35 &


# Mouse acceleration - accel ratio and threshold
xset m 1/1 0 &


# Turn on/off system beep
xset b off &


# Run the conky
if command -v conky >/dev/null 2>&1; then
	conky -q &
fi


# Start xflux
if command -v xflux >/dev/null 2>&1; then
	xflux -l 58 -g 5 -k 2900 &
fi


# Start compton - X11 compositor
if command -v compton >/dev/null 2>&1; then
	if glxinfo | egrep -iq 'direct rendering: yes'; then
		EXECXCOMP='compton --vsync opengl'
	else
		EXECXCOMP='compton'
	fi
	if [ ! "$(pidof compton)" ]; then
		$EXECXCOMP &
	fi
fi
